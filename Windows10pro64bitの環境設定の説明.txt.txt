Windows10pro64bitの環境設定の説明

１．はじめに

以下のサイトに、環境設定について記載されていますが、
実際にはathrill実行に必要最小限の設定方法をここにまとめてみました。

TOPPERS/athrillをdockerで利用できるようにするまで
https://qiita.com/kanetugu2018/items/f1368a6da7bdc773cfd9

手順については、いろいろなマシンやWSLのバージョンなど多岐に
わたると思いますが、今回は、Windows10Pro64bitの環境に縛って説明します。
またWSL2を使うものとしています。
理由は、HyperVが使えるため、設定することが最も少なく、もっとも敷居が
低いと判断したからです。
逆にWindows以外や　Windows10Homeでどうしても設定したい方は、上記サイトに
記載されているのでそれ参照ください。

２．この説明のゴール
WSLとDockerがセットアップされている状態にすること。
具体的には以下のコマンドでathrillが実行できる環境にあること

PS>docker run  -it kanetugu2015/athrill_asp3:ver3.0
#cda
#athrill2 -c1 -i -m memory.txt -d device_config.txt asp

またV850のビルド環境のセットアップされています。

3.前提条件
Windows10pro 64bit バージョン 2004、ビルド 19041 以上
仮想化支援機能「Intel VT／AMD-V」対応プロセッサ
4GBメモリ以上

バージョン 2004へのアップデート方法は以下を参考に実施ください。
https://qiita.com/tomokei5634/items/27504849bb4353d8fef8



3.手順
説明は後にして設定内容は以下の通り

1)WSLを利用できるよう有効にする
　コントロールパネル->プログラムと機能->Windowsの機能の有効化と無効化
   HyperV
　 Linux用Windowsサブシステム
　これを有効にする。
2)"仮想マシン プラットフォーム" オプション機能を有効にする
管理者権限　PowerShellから以下を実行

PS>dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart

3)WSL 2 Linux カーネルの更新
https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi
ダウンロードして実行する。wsl_update+x64.exe

4)WSL2 を既定のバージョンとして設定する
PS>wsl --set-default-version 2

5)Docker for Windowsをインストール
https://docs.docker.com/docker-for-windows/install/#download-docker-for-windows
Desktop Installer.exe をダウンロードして実行

6)Setting画面からGeneralタブを開き、Expose daemon on tcp://localhost:2375 without TLSにチェックを入れる。

以上

